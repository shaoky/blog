## 什么是闭包？

闭包是javascript的一大难点，也是它的特色。很多高级应用都要依靠闭包来实现。

### 变量作用域

要理解闭包，首先要理解javascript的特殊的变量作用域。

变量的作用域无非就两种：全局变量和局部变量

javascript语言的特别之处就在于：函数内部可以直接读取全局变量，但是在函数外部无法读取函数内部的局部变量。

注意点：在函数内部声明变量的时候，一定要使用var命令。如果不用的话，你实际上声明的是一个全局变量！

```javascript
var name = '张三'
function f1 () {
    console.log(n)
}
f1() // 张三
```

```javascript
var name = '张三'
function f1 () {
    console.log(n)
}
f1() // 张三
```

## 思考题

如果你能理解下面两段代码的运行结果，应该就算理解闭包的运行机制了。

例子1：

```javascript
var name = '张三'
var user = {
    name: '李四',
    getUserName: function () {
        return function () {
            return this.name
        }
    }
}
user.getUserName()()
```

例子2：

```javascript
var name = '张三'
var user = {
    name: '李四',
    getUserName: function () {
        var that = this
        return function () {
            return that.name
        }
    }
}
user.getUserName()()
```